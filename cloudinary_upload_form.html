<!-- File: cloudinary_upload_form.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cloudinary Image Upload - Products</title>
  <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
      padding: 0;
      background: #f7f7f7;
    }
    .container {
      background: white;
      border-radius: 8px;
      padding: 20px;
      max-width: 500px;
      margin: auto;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    button {
      background-color: #3f51b5;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }
    img {
      max-width: 100%;
      margin-top: 15px;
      border-radius: 6px;
    }
    input[type="text"] {
      width: 100%;
      padding: 8px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Upload Product Image</h2>
    <button id="upload_widget_opener">Upload Image</button>
    <img id="preview" src="" alt="Preview will appear here" />
    <input type="text" id="image_url" readonly placeholder="Uploaded image URL will appear here" />
  </div>

  <script type="text/javascript">
    const cloudName = 'dxbujdqyn'; // Your Cloudinary cloud name
    const uploadPreset = 'unsigned'; // Set this in your Upload Presets on Cloudinary
    const folder = 'products';

    const myWidget = cloudinary.createUploadWidget(
      {
        cloudName: cloudName,
        uploadPreset: uploadPreset,
        folder: folder,
        sources: ['local', 'camera', 'url'],
        cropping: false,
        multiple: false,
        maxFiles: 1,
      },
      (error, result) => {
        if (!error && result && result.event === "success") {
          const uploadedUrl = result.info.secure_url;
          document.getElementById("preview").src = uploadedUrl;
          document.getElementById("image_url").value = uploadedUrl;
        }
      }
    );

    document.getElementById("upload_widget_opener").addEventListener("click", () => {
      myWidget.open();
    }, false);
  </script>
</body>
</html>
